<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>íšŒì „ì´ˆë°¥ ì£¼ë¬¸ì„œ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700&display=swap"
      rel="stylesheet"
    />
    <style>
      body {
        font-family: "Noto Sans KR", sans-serif;
      }

      .select-arrow {
        background-image: url("images/chevron-down.svg");
        background-repeat: no-repeat;
        background-position: right 0.75rem center;
        background-size: 1.25em;
      }

      /* ì»¤ìŠ¤í…€ ìŠ¤í¬ë¡¤ë°” */
      .custom-scrollbar::-webkit-scrollbar {
        width: 6px;
      }

      .custom-scrollbar::-webkit-scrollbar-track {
        background: #2d2d2d;
        border-radius: 4px;
      }

      .custom-scrollbar::-webkit-scrollbar-thumb {
        background: #4b5563;
        border-radius: 4px;
      }

      .custom-scrollbar::-webkit-scrollbar-thumb:hover {
        background: #6b7280;
      }

      /* ì˜ìˆ˜ì¦ í†±ë‹ˆ íš¨ê³¼ */
      .receipt-jagged-top {
        position: relative;
        background: white;
      }

      .receipt-jagged-top::before {
        content: "";
        position: absolute;
        top: -10px;
        left: 0;
        width: 100%;
        height: 20px;
        background: radial-gradient(circle, white 10.5px, transparent 10px);
        background-size: 20px 24px;
        background-position: center bottom;
        background-repeat: repeat-x;
        transform: rotate(180deg);
      }
    </style>
    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              dark: {
                bg: "#121212",
                card: "#1E1E1E",
                input: "#2C2C2C",
                hover: "#3A3A3A",
              },
              brand: {
                orange: "#FF9F43",
                teal: "#00D2D3",
              },
            },
          },
        },
      };
    </script>
  </head>

  <body
    class="bg-dark-bg min-h-screen flex items-center justify-center p-4 text-gray-100"
  >
    <!-- ë©”ì¸ ì¹´ë“œ -->
    <div
      class="w-full max-w-[500px] bg-dark-card rounded-3xl shadow-2xl border border-gray-800 p-6 sm:p-8 relative"
    >
      <!-- í—¤ë” -->
      <div class="text-center mb-8">
        <h1
          class="text-3xl font-bold mb-2 flex items-center justify-center gap-2"
        >
          <span class="text-4xl">ğŸ£</span>
          <span
            class="bg-gradient-to-r from-lime-300 to-lime-500 bg-clip-text text-transparent"
            >íšŒì „ì´ˆë°¥ ì£¼ë¬¸ì„œ</span
          >
        </h1>
        <p class="text-gray-400 text-sm">
          ì›í•˜ëŠ” ì´ˆë°¥ì„ ì„ íƒí•´ì„œ ì£¼ë¬¸ ëª©ë¡ì— ë‹´ì•„ë³´ì„¸ìš”!
        </p>
      </div>

      <!-- ì½˜í…ì¸  ê·¸ë¦¬ë“œ -->
      <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 mb-6">
        <!-- ë©”ë‰´ ì„ íƒ -->
        <div
          class="bg-dark-input rounded-xl p-4 border border-gray-700 flex flex-col gap-4"
        >
          <div class="flex justify-between mb-2">
            <h2 class="text-sm font-bold text-gray-300">ë©”ë‰´ ì„ íƒ</h2>
            <div
              class="inline-flex self-start bg-lime-300/20 text-lime-400 px-3 py-1 rounded-full text-xs font-bold border border-lime-400"
            >
              ê°œë‹¹ 1,500ì›
            </div>
          </div>
          <select
            id="select-sushi"
            class="w-full bg-dark-card text-gray-200 border border-gray-600 rounded-lg px-3 py-2.5 outline-none focus:border-lime-400 transition-colors appearance-none select-arrow cursor-pointer"
          >
            <option>ì—°ì–´ì´ˆë°¥</option>
            <option>ê´‘ì–´ì´ˆë°¥</option>
            <option>ì°¸ì¹˜ì´ˆë°¥</option>
            <option>ê³„ë€ì´ˆë°¥</option>
            <option>ìœ ë¶€ì´ˆë°¥</option>
            <option>ìƒˆìš°ì´ˆë°¥</option>
          </select>

          <button
            type="button"
            id="add-btn"
            class="w-full bg-lime-400 hover:bg-lime-500 text-black font-bold py-2.5 rounded-lg transition-all active:scale-95 shadow-lg shadow-lime-500/20"
          >
            + ì¶”ê°€
          </button>
        </div>

        <!-- ì£¼ë¬¸ ëª©ë¡ -->
        <div
          class="bg-dark-input rounded-xl p-4 border border-gray-700 flex flex-col h-[220px]"
        >
          <h2 class="text-sm font-bold text-gray-300 mb-3">ì£¼ë¬¸ ëª©ë¡</h2>

          <ul
            id="order-list"
            class="flex-1 overflow-y-auto custom-scrollbar pr-1 space-y-2"
          >
            <!-- ì•„ì´í…œì´ ì—¬ê¸°ì— ì¶”ê°€ë©ë‹ˆë‹¤ -->
          </ul>
        </div>
      </div>

      <!-- ìš”ì•½ ë°” -->
      <div
        class="bg-dark-input rounded-xl p-4 border border-gray-700 flex items-center justify-between"
      >
        <div class="text-gray-300 font-medium">
          ì´ ìˆ˜ëŸ‰:
          <strong id="total-count" class="text-white font-bold text-lg ml-1"
            >0</strong
          >
          ì ‘ì‹œ
        </div>
        <button
          type="button"
          id="btn-calc"
          class="bg-brand-teal hover:bg-teal-400 text-black font-bold px-6 py-2 rounded-lg transition-all active:scale-95 shadow-lg shadow-teal-500/20"
        >
          ê³„ì‚°í•˜ê¸°
        </button>
      </div>

      <!-- ì˜ìˆ˜ì¦ ì„¹ì…˜ -->
      <div
        id="receipt-section"
        class="relative transition-all duration-500 transform translate-y-4 opacity-0 hidden mt-8"
      >
        <!-- í†±ë‹ˆë°”í€´ ìƒë‹¨ íš¨ê³¼ -->
        <div class="receipt-jagged-top h-4 w-full"></div>

        <div class="bg-white p-6 pb-8 text-center shadow-xl">
          <div
            class="flex items-center justify-center gap-2 mb-4 text-gray-800"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              class="h-5 w-5"
              fill="none"
              viewBox="0 0 24 24"
              stroke="currentColor"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"
              />
            </svg>
            <span class="font-bold text-lg">ì˜ìˆ˜ì¦</span>
          </div>

          <div
            class="w-full border-t-2 border-dashed border-gray-300 my-4"
          ></div>

          <p class="text-gray-500 text-sm mb-1">ì´ ì£¼ë¬¸ê¸ˆì•¡</p>
          <div class="text-4xl font-bold text-gray-900 tracking-tight">
            <span id="total-price">0</span><span class="text-2xl ml-1">ì›</span>
          </div>
        </div>

        <div class="bg-white h-4 rounded-b-xl"></div>
      </div>
    </div>

    <script>
      // ì´ˆê¸°í™”
      const sushiSelect = document.getElementById("select-sushi");
      const addBtn = document.getElementById("add-btn");
      const orderList = document.getElementById("order-list");
      const totalCount = document.getElementById("total-count");
      const btnCalc = document.getElementById("btn-calc");
      const totalPrice = document.getElementById("total-price");
      const receiptSection = document.getElementById("receipt-section");

      const UNIT_PRICE = 1500;
      let orders = []; //ì£¼ë¬¸ëª©ë¡

      // ì´ë²¤íŠ¸
      addBtn.addEventListener("click", addSushi);
      btnCalc.addEventListener("click", showReceipt);

      // feature - ì£¼ë¬¸ëª©ë¡ì— ì¶”ê°€í•˜ê¸°
      function addSushi() {
        const selectedSushi = sushiSelect.value;
        const newSushi = {
          id: Date.now(),
          name: selectedSushi,
        };
        orders = [...orders, newSushi];

        render();

        // ìƒˆ í•­ëª© ì¶”ê°€ ì‹œ ì˜ìˆ˜ì¦ ìˆ¨ê¸°ê¸° (UX)
        receiptSection.classList.add("hidden");
      }

      // feature - í™”ë©´ì— ë¿Œë ¤ì£¼ê¸°
      function render() {
        orderList.innerHTML = "";
        orders.forEach((order) => {
          const li = document.createElement("li");
          li.className =
            "flex items-center justify-between bg-dark-card p-3 rounded-lg border border-gray-700 group hover:border-gray-600 transition-colors animate-[fadeIn_0.2s_ease-out]";
          li.innerHTML = `
              <span class="text-gray-200 font-medium">${order.name}</span>
              <button class="delete-btn text-gray-500 hover:text-red-400 p-1 rounded-md hover:bg-red-400/10 transition-colors">âŒ</button>
          `;
          li.querySelector(".delete-btn").addEventListener("click", () => {
            removeSushi(order.id);
          });
          orderList.appendChild(li);
        });

        // ìˆ˜ëŸ‰ ì¹´ìš´íŒ…
        totalCount.textContent = orders.length;

        // í•˜ë‹¨ìœ¼ë¡œ ìŠ¤í¬ë¡¤
        orderList.scrollTop = orderList.scrollHeight;
      }

      // feature - ì˜ìˆ˜ì¦ ë°œí–‰í•˜ê¸°
      function showReceipt() {
        totalPrice.textContent = (orders.length * UNIT_PRICE).toLocaleString();

        // ì• ë‹ˆë©”ì´ì…˜ê³¼ í•¨ê»˜ ì˜ìˆ˜ì¦ í‘œì‹œ
        receiptSection.classList.remove("hidden");
        receiptSection.classList.remove("translate-y-4", "opacity-0");
      }

      // feature - ì‚­ì œ
      function removeSushi(id) {
        orders = orders.filter((order) => order.id !== id);
        render();

        // í•­ëª© ìˆ˜ì • ì‹œ ì˜ìˆ˜ì¦ ìˆ¨ê¸°ê¸°
        receiptSection.classList.add("hidden");
      }
    </script>
  </body>
</html>
